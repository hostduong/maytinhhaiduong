{{ define "master_ho_so" }}
    {{ template "header_master" . }}
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.css">
    <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js"></script>
    
    <style>
        .input-error { border-color: #ef4444 !important; background-color: #fef2f2 !important; }
        .error-text { color: #ef4444; font-size: 0.75rem; margin-top: 0.25rem; display: none; }
        .error-text.show { display: block; }
        input::-ms-reveal, input::-ms-clear { display: none; }
    </style>

    <div class="max-w-5xl mx-auto pb-8 mb-24 sm:mb-10">

        <div class="animated-border-wrapper shadow-xl shadow-purple-100/50 mb-8">
            <div class="animated-border-inner overflow-hidden relative">
                <div class="bg-gradient-to-r from-purple-600 to-indigo-700 h-32 relative">
                    <div class="absolute inset-0 opacity-20" style="background-image: radial-gradient(#ffffff 1px, transparent 1px); background-size: 20px 20px;"></div>
                </div>
                
                <div class="text-center -mt-16 relative px-6 pb-8 z-10">
                    <div class="inline-block p-1.5 bg-white rounded-full shadow-md">
                        <div class="w-28 h-28 bg-slate-100 rounded-full flex items-center justify-center overflow-hidden border-2 border-white shadow-inner relative">
                            {{ $avatar := .NhanVien.AnhDaiDien }}
                            {{ if not $avatar }}
                                {{ $avatar = print "https://ui-avatars.com/api/?name=" .NhanVien.TenKhachHang "&background=f3e8ff&color=7e22ce&size=200&bold=true" }}
                            {{ end }}
                            <img src="{{ $avatar }}" onerror="this.src='https://ui-avatars.com/api/?name=99K&background=f3e8ff&color=7e22ce'" class="w-full h-full object-cover">
                        </div>
                    </div>
                    
                    <h2 class="mt-3 text-3xl font-black tracking-tight text-transparent bg-clip-text text-gradient-animated pb-1">
                        {{ .NhanVien.TenKhachHang }}
                    </h2>
                    
                    {{ $lvl := 9 }} {{ $thm := 0 }}
                    {{ if eq .NhanVien.VaiTroQuyenHan "quan_tri_he_thong" }} {{ $lvl = 0 }} {{ $thm = 9 }}
                    {{ else if eq .NhanVien.VaiTroQuyenHan "quan_tri_vien_he_thong" }} {{ $lvl = 1 }} {{ $thm = 4 }}
                    {{ end }}

                    <div class="mt-2 flex justify-center">
                        <div class="relative inline-flex items-center max-w-full">
                            <div class="badge-animated-wrap theme-{{ $thm }} {{ if lt $lvl 4 }}tier-s{{ else if lt $lvl 7 }}tier-a{{ else if eq $lvl 7 }}tier-b{{ else }}tier-c{{ end }} !mt-0 !mr-0 max-w-full">
                                <div class="badge-inner shadow-sm truncate max-w-[250px]">{{ .NhanVien.ChucVu }}</div>
                            </div>
                            <div class="floating-icon {{ if eq $lvl 0 }}icon-lvl-0{{ else if gt $lvl 7 }}icon-lvl-9{{ end }}">
                                {{ if eq $lvl 0 }} üëë {{ else if eq $lvl 1 }} ‚ö° {{ else if eq $lvl 2 }} üõ°Ô∏è {{ else if eq $lvl 3 }} ‚≠ê {{ else if eq $lvl 4 }} üéØ {{ else if eq $lvl 5 }} üíº {{ else if eq $lvl 6 }} ‚öñÔ∏è {{ else if eq $lvl 7 }} üöÄ {{ else if eq $lvl 8 }} ü§ù {{ else }} üë§ {{ end }}
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-center gap-4 mt-5">
                        {{ if .NhanVien.MangXaHoi.Facebook }}
                        <a href="{{ .NhanVien.MangXaHoi.Facebook }}" target="_blank" class="p-2.5 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-600 hover:text-white transition shadow-sm"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg></a>
                        {{ end }}
                        {{ if .NhanVien.MangXaHoi.Tiktok }}
                        <a href="{{ .NhanVien.MangXaHoi.Tiktok }}" target="_blank" class="p-2.5 bg-slate-100 text-slate-800 rounded-full hover:bg-black hover:text-white transition shadow-sm"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M19.589 6.686a4.793 4.793 0 0 1-3.77-4.245V2h-3.445v13.672a2.896 2.896 0 0 1-5.201 1.743l-.002-.001.002.001a2.895 2.895 0 0 1 3.183-4.51v-3.5a6.329 6.329 0 0 0-5.394 10.692 6.33 6.33 0 0 0 10.857-4.424V8.687a8.182 8.182 0 0 0 4.773 1.526V6.79a4.831 4.831 0 0 1-1.003-.104z"/></svg></a>
                        {{ end }}
                        {{ if .NhanVien.MangXaHoi.Zalo }}
                        <a href="https://zalo.me/{{ .NhanVien.MangXaHoi.Zalo }}" target="_blank" class="p-2.5 bg-blue-50 text-blue-500 rounded-full hover:bg-blue-500 hover:text-white transition font-black text-xs flex items-center justify-center w-10 h-10 border border-blue-200 shadow-sm">Zalo</a>
                        {{ end }}
                    </div>
                </div>
                
                <div class="flex flex-wrap justify-center gap-4 py-6 px-6 border-t border-purple-50 bg-slate-50/50 relative z-10">
                    <button onclick="toggleModal('modalInfo')" class="bg-white border border-purple-200 hover:bg-purple-50 text-purple-700 px-6 py-3 rounded-2xl font-bold shadow-sm transition transform hover:-translate-y-1 active:scale-95 flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg>
                        C·∫≠p nh·∫≠t h·ªì s∆°
                    </button>
                    <button onclick="toggleModal('modalPass')" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-2xl font-bold shadow-md shadow-purple-200 transition transform hover:-translate-y-1 active:scale-95 flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                        ƒê·ªïi m·∫≠t kh·∫©u
                    </button>
                    <button onclick="toggleModal('modalPin')" class="bg-indigo-900 hover:bg-indigo-950 text-white px-6 py-3 rounded-2xl font-bold shadow-md shadow-indigo-200 transition transform hover:-translate-y-1 active:scale-95 flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4h.002m0 0v.01"></path></svg>
                        ƒê·ªïi m√£ PIN
                    </button>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="animated-border-wrapper shadow-lg shadow-purple-100/50 md:col-span-2">
                <div class="animated-border-inner p-8 space-y-6 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-48 h-48 bg-purple-600/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none z-0"></div>
                    <h3 class="text-lg font-black text-purple-700 border-b border-purple-50 pb-3 mb-2 flex items-center gap-2 relative z-10 uppercase tracking-widest">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg> Th√¥ng tin li√™n h·ªá
                    </h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 relative z-10">
                        <div><label class="form-lbl">H·ªç v√† t√™n</label><div class="text-purple-700 font-bold text-base">{{ .NhanVien.TenKhachHang }}</div></div>
                        <div><label class="form-lbl">S·ªë ƒëi·ªán tho·∫°i</label><div class="text-emerald-600 font-bold text-base">{{ if .NhanVien.DienThoai }} {{ .NhanVien.DienThoai }} {{ else }} -- {{ end }}</div></div>
                        <div><label class="form-lbl">Email</label><div class="text-blue-600 font-bold text-base">{{ .NhanVien.Email }}</div></div>
                        <div><label class="form-lbl">Ng√†y sinh</label><div class="text-orange-600 font-bold text-base">{{ if .NhanVien.NgaySinh }} {{ .NhanVien.NgaySinh }} {{ else }} --/--/---- {{ end }}</div></div>
                        <div class="sm:col-span-2"><label class="form-lbl">ƒê·ªãa ch·ªâ</label><div class="text-slate-800 font-bold text-base">{{ if .NhanVien.DiaChi }} {{ .NhanVien.DiaChi }} {{ else }} <span class="text-slate-300 italic">Ch∆∞a c·∫≠p nh·∫≠t</span> {{ end }}</div></div>
                    </div>
                </div>
            </div>
            
            <div class="animated-border-wrapper shadow-lg shadow-purple-100/50">
                <div class="animated-border-inner p-8 space-y-6 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-purple-600/10 rounded-full blur-3xl -mr-10 -mt-10 pointer-events-none z-0"></div>
                    <h3 class="text-lg font-black text-purple-700 border-b border-purple-50 pb-3 mb-2 flex items-center gap-2 relative z-10 uppercase tracking-widest">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> B·∫£o m·∫≠t
                    </h3>
                    <div class="relative z-10 space-y-6">
                        <div><label class="form-lbl">T√™n ƒëƒÉng nh·∫≠p (ID)</label><div class="text-indigo-600 font-black tracking-wide text-base">{{ .NhanVien.TenDangNhap }}</div></div>
                        <div><label class="form-lbl">Ng√†y gia nh·∫≠p</label><div class="text-slate-700 font-bold text-sm">{{ .NhanVien.NgayTao }}</div></div>
                        <div><label class="form-lbl">C·∫≠p nh·∫≠t l·∫ßn cu·ªëi</label><div class="text-slate-500 font-medium text-sm">{{ .NhanVien.NgayCapNhat }}</div></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{ end }}
